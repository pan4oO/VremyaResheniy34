function initPhoneMask(){const e=document.querySelectorAll('input[type="tel"]'),t={mask:"+{7} (000) 000 00-00"};e.forEach((e=>{IMask(e,t)}))}function GetYMCID(){var e=document.cookie.match("(?:^|;)\\s*_ym_uid=([^;]*)");return!!e&&decodeURIComponent(e[1])}function doFiltering(e,t,s,n){const o=document.querySelector(".not-found-text");o&&o.remove();const c=document.querySelector(".filters__search");c&&(c.value="");let r=e.querySelectorAll(`${t}`);switch(n){case"role":specialistsFilters.role=replaceAll(s," ","");break;case"specialist":specialistsFilters.specialist=replaceAll(s," ","")}"default"==specialistsFilters.role&&"default"==specialistsFilters.specialist?r.forEach((e=>{e.classList.remove("hide")})):"default"==specialistsFilters.role||"default"==specialistsFilters.specialist?r.forEach((e=>{(e.classList.contains(specialistsFilters.role)||"default"==specialistsFilters.role)&&(e.classList.contains(specialistsFilters.specialist)||"default"==specialistsFilters.specialist)?e.classList.remove("hide"):e.classList.add("hide")})):r.forEach((e=>{e.matches(`.${specialistsFilters.role}.${specialistsFilters.specialist}`)?e.classList.remove("hide"):e.classList.add("hide")}));let i=document.querySelectorAll(`${t}.hide`);if(r.length===i.length){const t=document.createElement("p");t.classList.add("not-found-text"),t.textContent="Ничего не найдено",e.append(t)}}function searchFilter(e,t,s,n){document.querySelector(".not-found-text")&&document.querySelector(".not-found-text").remove();let o;const c=document.querySelector(s);let r=e.querySelectorAll(`${t}`);c.addEventListener("input",(function(){specialistsFilters.role="default",specialistsFilters.specialist="default";const s=c.value.trim().toLowerCase();clearTimeout(o),o=setTimeout((()=>{""!=c?r.forEach((e=>{console.log(e.querySelector(n));e.querySelector(n).textContent.trim().toLowerCase().includes(s)?e.classList.remove("hide"):e.classList.add("hide")})):r.forEach((e=>{e.classList.remove("hide")})),setTimeout((()=>{AOS.refresh()}),500),document.querySelector(".not-found-text")&&document.querySelector(".not-found-text").remove();let o=e.querySelectorAll(`${t}.hide`);if(r.length===o.length){const t=document.createElement("p");t.classList.add("not-found-text"),t.textContent="Ничего не найдено",e.append(t)}}),300)}))}function hide(e){e.style.pointerEvents="none",e.style.opacity="0.3"}function show(e){e.style.pointerEvents="",e.style.opacity=""}function checkCorrectField(e){switch(e.name){case"f_name":const t=new RegExp("^[а-яА-Я-ёЁ ]+$");return!!e.value.match(t)||(e.style.border="1px solid red",setTimeout((()=>{e.style.border=""}),3e3),!1);case"f_comment":case"f_age":case"f_email":case"f_number":return 0!==e.value.length||(e.style.border="1px solid red",setTimeout((()=>{e.style.border=""}),3e3),!1);case"f_tel":return 18===e.value.length||(e.style.border="1px solid red",setTimeout((()=>{e.style.border=""}),3e3),!1);default:return!0}}function sendRequestToCall(e){e.preventDefault(),hide(e.target);let t=!0;const s=new FormData,n={};if(Object.keys(e.target).forEach((o=>{const c=e.target[o];if(checkCorrectField(c)||(t=!1),c.name&&void 0!==c.value){n[c.name]=c.value;let e=!1;"radio"!==c.type?s.append(c.name,c.value):!0===c.checked?(s.append(c.name,c.value),e=!0):!0!==e&&s.append(c.name,"0")}})),t){show(e.target);const t=e.target.querySelector('[type="submit"]');t.style.opacity="0.5",t.style.pointerEvents="none",fetch("/netcat/add.php",{method:"POST",body:s}).then((async s=>{try{show(e.target);let n=await s.json();if("application-page"===e.target.getAttribute("data-target")){e.target.style.pointerEvents="none";const t=document.querySelector('[data-path="response"]'),s=document.querySelector('[data-target="response"]').querySelector(".popup__result");s.classList.add("form-popup__title"),s.classList.add("response-block"),s.style.marginBottom=0,s.innerHTML=n.response,t.click(),e.target.reset(),e.target.style.pointerEvents="all"}else{const t=document.createElement("p");t.classList.add("form-popup__title"),t.classList.add("response-block"),t.style.marginBottom=0,t.innerHTML=n.response,e.target.before(t),e.target.reset(),e.target.style.display="none",setTimeout((()=>{t.remove(),e.target.style.display=""}),5e3)}t.style.opacity="1",t.style.pointerEvents="all"}catch(s){show(e.target),t.style.opacity="1",t.style.pointerEvents="all",alert("Возникла ошибка. Повторите попытку позже")}}))}else show(e.target)}function initFormSender(){document.querySelectorAll(".form").forEach((e=>{e.addEventListener("submit",(e=>{sendRequestToCall(e)}))}))}function setWidthScrollBar(){let e=document.createElement("div");e.style.position="absolute",e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",document.body.append(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}function menuOpen(e){e.classList.toggle("active"),document.body.classList.toggle("lock")}function menuClose(e){e.classList.remove("active"),document.body.classList.remove("lock")}document.addEventListener("DOMContentLoaded",(function(){function e(e){const t=e.querySelector(".form");if(t){const e=t.querySelector(".additional__field");e&&(e.value="Неизвестная форма")}e.classList.remove("open"),document.body.classList.remove("lock"),document.querySelector("html").style.paddingRight=0,document.querySelectorAll(".padding-lock").forEach((function(e){e.style.paddingRight=0}))}const t=document.querySelectorAll(".popup-btn"),s=document.querySelectorAll(".popup");document.querySelectorAll(".close-popup").forEach((function(t){t.addEventListener("click",(function(t){e(t.target.closest(".popup"))}))})),t.forEach((function(t){t.addEventListener("click",(function(n){const o=n.currentTarget.dataset.path,c=document.querySelector(`[data-target="${o}"]`),i=c.querySelector(".form"),l=t.dataset?.title||"Получите консультацию специалиста бесплатно",a=t.dataset?.additional||"";if(s.forEach((function(t){e(t),t.addEventListener("click",(function(t){t.target.closest(".popup__content")||e(t.target.closest(".popup"))}))})),menuClose(r),i){const e=i.querySelector(".form-popup__title"),t=i.querySelector(".additional__field");t&&(t.value=a),e&&!i.classList.contains("form-review")&&(e.textContent=l)}c.classList.add("open"),document.body.classList.add("lock"),document.querySelector("html").style.paddingRight=setWidthScrollBar()+"px",document.querySelectorAll(".padding-lock").forEach((function(e){e.style.paddingRight=setWidthScrollBar()+"px"}))}))}));const n=document.querySelectorAll(".search-open"),o=document.querySelectorAll(".search-close");n.length>0&&n.forEach((e=>{e.addEventListener("click",(function(){e.closest(".header__search-wrapper").querySelector(".search-form").classList.toggle("active")}))})),o.length>0&&o.forEach((e=>{e.addEventListener("click",(function(){e.closest(".header__search-wrapper").querySelector(".search-form").classList.remove("active")}))})),window.addEventListener("click",(function(e){e.target.closest(".header__search-wrapper")||document.querySelector(".search-form").classList.remove("active")}));const c=document.querySelectorAll(".menu__item-open-btn");c.length>0&&c.forEach((e=>{e.addEventListener("click",(function(){e.closest(".menu-item").classList.toggle("active")}))}));const r=document.querySelector(".header"),i=document.querySelectorAll(".open-menu"),l=document.querySelectorAll(".close-menu");i.forEach((function(e){e.addEventListener("click",(function(){menuOpen(r)}))})),l.forEach((function(e){e.addEventListener("click",(function(){menuClose(r)}))}));const a=document.querySelectorAll(".doctors_sliders");a.length&&a.forEach((e=>{const t=e.querySelector(".doctors__image-slider"),s=e.querySelector(".doctors__content-slider"),n=e.querySelector(".doctors__thumbs-slider"),o=n.querySelectorAll(".swiper-slide"),c=new Swiper(n,{spaceBetween:18,slidesPerView:5,navigation:{prevEl:n.closest(".slider-wrapper").querySelector(".slider-btn_prev"),nextEl:n.closest(".slider-wrapper").querySelector(".slider-btn_next")},breakpoints:{0:{slidesPerView:1},1025:{slidesPerView:5}}}),r=new Swiper(s,{spaceBetween:18,effect:"fade",fadeEffect:{crossFade:!0},touchRatio:!1,breakpoints:{0:{touchRatio:!0},1025:{touchRatio:!1}}}),i=new Swiper(t,{spaceBetween:18,effect:"fade",fadeEffect:{crossFade:!0},touchRatio:!1});if(o.length>0)for(let e=0;e<o.length;e+=1)o[e].addEventListener("click",(function(){r.slideTo(e),i.slideTo(e)}));c.on("slideChange",(function(){if(window.innerWidth<=1024){const e=c.activeIndex;r.slideTo(e)}})),r.on("slideChange",(function(){if(window.innerWidth<=1024){const e=r.activeIndex;c.slideTo(e)}}))}));const d=document.querySelectorAll(".documents__slider");d.length>0&&d.forEach((e=>{new Swiper(e,{spaceBetween:15,slidesPerView:3,navigation:{prevEl:e.closest(".slider-wrapper").querySelector(".slider-btn_prev"),nextEl:e.closest(".slider-wrapper").querySelector(".slider-btn_next")},breakpoints:{0:{slidesPerView:1.5},576:{slidesPerView:2.5},1025:{slidesPerView:3}}})}));const u=document.querySelectorAll(".slider-3-slides");u.length>0&&u.forEach((e=>{new Swiper(e,{spaceBetween:20,slidesPerView:3,navigation:{prevEl:e.closest(".slider-wrapper").querySelector(".slider-btn_prev"),nextEl:e.closest(".slider-wrapper").querySelector(".slider-btn_next")},breakpoints:{0:{slidesPerView:1.2,spaceBetween:10},576:{slidesPerView:2,paceBetween:10},1025:{slidesPerView:3,paceBetween:20}}})}));const p="data-accordion-content",h="active";class m{static apply(e){if(!e)return;const t=new m;t.accordion=e,e.onclick=t.onClick.bind(t)}handleClick(e){const t=e.closest(".accor").querySelector(".accor-full");t.classList.contains(h)?this.close(t):this.open(t)}open(e){const t=e.querySelector(`[${p}`).closest(".accor"),s=e.querySelector(`[${p}`),n=s.querySelector("[data-accordion-list"),o=s.clientHeight;let c=0;const r=e.querySelectorAll(`[${p}`);t.classList.add(h),e.classList.add(h),this.rotateIconFor(e.previousElementSibling);for(const e of r)c+=e.scrollHeight;s.contains(n)?e.style.maxHeight=`${o+c}px`:e.style.maxHeight=`${o}px`}close(e){const t=e.querySelector(`[${p}`).closest(".accor");e.style.maxHeight=0,t.classList.remove(h),e.classList.remove(h),this.rotateIconFor(e.previousElementSibling)}rotateIconFor(e){const t="rotated",s=e.dataset.hasOwnProperty("accordionArrow")?e:e.querySelector("[data-accordion-arrow]");if(!s)return;s.classList.contains(t)?s.classList.remove(t):s.classList.add(t)}onClick(e){let t=e.target.closest("[data-accordion-button]");t&&void 0!==t.dataset.accordionButton&&this.handleClick(t),setTimeout((()=>{AOS.refresh()}),500)}}const f=document.querySelectorAll(".accor-wrapper");f.length>0&&f.forEach((function(e){m.apply(e)})),Fancybox.bind('[data-fancybox="documents"]',{placeFocusBack:!1}),Fancybox.bind('[data-fancybox="documents"]',{placeFocusBack:!1});const y=document.querySelector(".navigation-article");if(y){const e=document.querySelectorAll(".text-section h2, .text-section h3, .text-section h4, .text-section h5, .text-section h6");if(e.length>0){for(let t=0;t<e.length;t+=1){const s=e[t],n=s.textContent,o=document.querySelector(".navigation-article__list"),c=document.createElement("li"),r=document.createElement("a");c.classList.add("navigation-article__item"),r.classList.add("navigation-article__link"),s.setAttribute("id",`${t}`),r.setAttribute("href",`#${t}`),r.textContent=" "+n,c.append(r),o.append(c)}document.querySelectorAll('a[href^="#"').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href").substring(1);const s=document.getElementById(t).getBoundingClientRect().top-180;window.scrollBy({top:s,behavior:"smooth"})}))}))}else y.querySelector(".navigation-article__content").remove(),y.querySelector(".navigation-article__wrapper").style.justifyContent="center"}document.querySelectorAll("form").forEach((e=>{const t=document.createElement("input"),s=document.createElement("input");t.setAttribute("name","f_trafficSource"),t.setAttribute("type","hidden"),s.setAttribute("name","f_istochnik"),s.setAttribute("type","hidden"),e.append(t),e.append(s)})),sbjs.init();const _=document.querySelectorAll("input[name=f_trafficSource"),v=document.querySelectorAll("input[name=f_istochnik]");_.forEach((e=>{e.value=sbjs.get.current.typ})),v.forEach((e=>{e.value=sbjs.get.current.src}));const b=document.querySelectorAll(".rating"),g=document.querySelector('[name="f_id_article"]');let S="";function q(e){L(e),w(),e.classList.contains("rating__set")&&function(e){const t=e.querySelectorAll(".rating__item");for(let s=0;s<t.length;s+=1){const n=t[s];n.addEventListener("mouseenter",(t=>{L(e),w(n.value)})),n.addEventListener("mouseleave",(e=>{w()})),n.addEventListener("click",(n=>{t.forEach((e=>{e.style.pointerEvents="none"})),L(e),ratingValue.innerHTML=s+1,w()}))}}(e)}function L(e){ratingActive=e.querySelector(".rating__active"),ratingValue=e.querySelector(".rating__value"),ratingText=e.querySelector(".rating__text")}function w(e=ratingValue.innerHTML.replace(",",".")){const t=e/.05;ratingActive.style.width=`${t}%`,ratingText&&(ratingText.innerHTML=`Рекомендуют ${Math.round(t)}%`)}g&&(S=g.value),b.length>0&&function(){for(let e=0;e<b.length;e+=1){q(b[e])}}(),setTimeout(GetYMCID(),400),document.querySelectorAll("form").forEach((e=>{e.innerHTML+='<input name="f_clientID" type="hidden" value='+GetYMCID()+">"})),(new class{container;tab_button_class;tab_content_class;tab_attribute_key;tab_attribute_target;tab_navigation_next;tab_navigation_prev;tab_active_name;constructor({container:e=".tabs-container",tabs_wrapper_class:t=".tabs__wrapper",button_class:s=".tab",content_class:n=".tab-content",attribute_key:o="path",attribute_target:c="target",nav_next:r=".tabs__arrow_next",nav_prev:i=".tabs__arrow_prev",name_active:l=".tabs__active"}={}){this.container=e,this.tabs_wrapper_class=t,this.tab_button_class=s,this.tab_content_class=n,this.tab_attribute_key=o,this.tab_attribute_target=c,this.tab_navigation_next=r,this.tab_navigation_prev=i,this.tab_active_name=l}initTabs(){document.querySelectorAll(this.container).forEach((e=>{this.initTabsWrapper(e)}))}initTabsWrapper(e){const t=e.querySelector(this.tabs_wrapper_class),s=e.querySelectorAll(this.tab_button_class),n=e.querySelectorAll(this.tab_content_class),o=e.querySelector(this.tab_navigation_next),c=e.querySelector(this.tab_navigation_prev),r=e.querySelector(this.tab_active_name),i=document.querySelectorAll(".tabs__close");let l=0;r&&(r.querySelector(".tabs__active-text").textContent=s[l].textContent);for(let e=0;e<s.length;e++)!0===s[e].dataset.start&&(l=e),s[e].addEventListener("click",(()=>{n[e]&&(l=e,this.showTabsContent({list_tabs:n,list_buttons:s,index:l}),r&&(r.querySelector(".tabs__active-text").textContent=s[e].textContent,r.closest(".tabs").classList.remove("active"),document.body.classList.remove("lock")),setTimeout((()=>{AOS.refresh()}),500))}));if(this.showTabsContent({list_tabs:n,list_buttons:s,index:l}),o&&o.addEventListener("click",(()=>{l+1<s.length?l+=1:l=0;const e=t.getBoundingClientRect().left,o=s[l].getBoundingClientRect().left-e;t.scrollBy({left:o,behavior:"smooth"}),this.showTabsContent({list_tabs:n,list_buttons:s,index:l})})),c&&c.addEventListener("click",(()=>{l-1>=0?l-=1:l=s.length-1;const e=t.getBoundingClientRect().left,o=s[l].getBoundingClientRect().left-e;t.scrollBy({left:o,behavior:"smooth"}),this.showTabsContent({list_tabs:n,list_buttons:s,index:l})})),r&&r.addEventListener("click",(function(){r.closest(".tabs").classList.add("active"),document.body.classList.add("lock")})),i.length>0)for(let e=0;e<i.length;e+=1){const t=i[e];t.addEventListener("click",(function(){t.closest(".tabs").classList.remove("active"),document.body.classList.remove("lock")}))}t.closest(".tabs__container").addEventListener("click",(function(e){e.target.closest(".tabs__wrapper")||(t.closest(".tabs").classList.remove("active"),document.body.classList.remove("lock"))}))}hideTabsContent({list_tabs:e,list_buttons:t}){t.forEach((e=>{e.classList.remove("active")})),e.forEach((e=>{e.classList.remove("active")}))}showTabsContent({list_tabs:e,list_buttons:t,index:s}){this.hideTabsContent({list_tabs:e,list_buttons:t}),e[s]&&e[s].classList.add("active"),t[s]&&t[s].classList.add("active")}}).initTabs(),initPhoneMask(),initFormSender(),AOS.init({once:!0,disable:"mobile"})}));

document.querySelectorAll('form').forEach((form) => {
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        // Определите result элемент для этой формы
        const result = document.getElementById('result' + this.id.replace('form', ''));
        const formData = new FormData(this);
        const object = Object.fromEntries(formData);
        const json = JSON.stringify(object);
        result.innerHTML = "Пожалуйста, подождите..."

        fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: json
            })
            .then(async (response) => {
                let json = await response.json();
                if (response.status == 200) {
                    result.innerHTML = "Ваше сообщение успешно отправлено!";
                } else {
                    console.log(response);
                    result.innerHTML = json.message;
                }
            })
            .catch(error => {
                console.log(error);
                result.innerHTML = "Что-то пошло не так!";
            })
            .then(function() {
                form.reset();
                setTimeout(() => {
                    result.style.display = "none";
                }, 3000);
            });
    });
});



